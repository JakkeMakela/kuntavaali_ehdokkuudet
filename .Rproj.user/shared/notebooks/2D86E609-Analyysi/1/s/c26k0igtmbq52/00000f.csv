"0",""
"0","#aiempiKoodit <- c(""KV-2017|K-2008|KV-2012"")"
"0",""
"0",""
"0","fulldata <- readRDS(paste0(cleanDataDir,""/kuntavaalidata.rds"")) "
"0","  #mutate(aiempi_koodi = str_detect(aiempi,aiempiKoodit)) %>%"
"0","  #mutate(aiempi_vuosi = str_replace(aiempi, '(.*?)-(.*?)', '\\2')) %>%"
"0","#  mutate(tunniste = paste(sukunimi, etunimi, puolue, kunta)) %>%"
"0","#  group_by(tunniste) %>%"
"0","#  arrange(vuosi) %>%"
"0","#  mutate( monesko_ehdolla = row_number()) %>%"
"0","#  mutate(aiempi = monesko_ehdolla >1) %>%"
"0","#  ungroup() %>%"
"0","#  filter(vuosi > min(vuosi))"
"0",""
"0",""
"0",""
"0",""
"0","tilasto <- fulldata %>%"
"0","  filter(puolue %in% testiPuolueet) %>%"
"0","  mutate(aiempi = as.numeric(aiempi) > 0) %>%"
"0","  group_by(vuosi, kunta, puolue) %>%"
"0","  summarize(kaikki = n(),"
"0","            aiemmin = sum(aiempi)) %>%"
"0","  "
"0","  mutate(vanhojen_osuus = aiemmin/kaikki) %>%"
"0","  filter(!is.na(vanhojen_osuus)) %>%"
"0","  filter(vanhojen_osuus > 0) %>%"
"0","  "
"0","  mutate(listan_pituus = max(kaikki)) %>%"
"0","  "
"0","  mutate(tayttoaste = kaikki/listan_pituus) %>%"
"0","  filter(listan_pituus >= 13) %>%"
"0","  filter(kaikki >= 20) "
"2","`summarise()` has grouped output by 'vuosi', 'kunta'. You can override using the `.groups` argument."
